# Context Header Template (~2000 token budget)
#
# Usage: inject_context.py reads this template and fills placeholders for each track.
# The output is prepended to every spec.md.
#
# Placeholders: {{TRACK_ID}}, {{WAVE}}, {{CC_VERSION}}, {{CONSTRAINTS}},
# {{INTERFACES_OWNED}}, {{INTERFACES_CONSUMED}}, {{EVENTS_PUBLISHED}},
# {{EVENTS_CONSUMED}}, {{DEPENDENCIES}}, {{FULL_CONTEXT_PATHS}}
#
# If the filled template exceeds 2000 tokens, fall back to context-header-minimal.md.

<!-- ARCHITECT CONTEXT v2 | Track: {{TRACK_ID}} | Wave: {{WAVE}} | CC: {{CC_VERSION}} -->

## Constraints (filtered for this track)

{{CONSTRAINTS}}

<!-- Example filled output:
- Observability: OTel SDK on all endpoints, structlog for Python
- Errors: RFC 7807 Problem Details, errors logged with trace ID
- Outbox: All event publishing through outbox table (same DB transaction)
- Caching: Redis cache-aside on read-heavy endpoints, TTL 5min (v1.1)
- Testing: TDD, 80% coverage, integration tests for API boundaries
-->

## Interfaces

### Owns
{{INTERFACES_OWNED}}

<!-- Example:
- POST /v1/resources — Create resource
- GET /v1/resources — List resources (cursor pagination)
- GET /v1/resources/{id} — Get resource by ID
- PUT /v1/resources/{id} — Update resource
- DELETE /v1/resources/{id} — Delete resource
-->

### Consumes
{{INTERFACES_CONSUMED}}

<!-- Example:
- GET /v1/auth/me (Track 03_auth) — Current user context
- Redis queue enqueue() (Track 06_redis_queue) — Background job dispatch
-->

### Publishes
{{EVENTS_PUBLISHED}}

<!-- Example:
- resource.created { resource_id, created_by, timestamp }
- resource.updated { resource_id, changed_fields, updated_by, timestamp }
- resource.deleted { resource_id, deleted_by, timestamp }
-->

### Subscribes
{{EVENTS_CONSUMED}}

<!-- Example:
- user.deleted (Track 03_auth) — Cascade-delete user's resources
-->

## Dependencies

{{DEPENDENCIES}}

<!-- Example:
- Track 01_infra_scaffold: Docker Compose + base images must be available
- Track 03_auth: Auth middleware must be importable
- Track 06_redis_queue: Queue abstraction must be available for background jobs
-->

## Full Context (read if needed)

{{FULL_CONTEXT_PATHS}}

<!-- Default paths:
- architect/architecture.md — System architecture and component map
- architect/cross-cutting.md — All versioned constraints
- architect/interfaces.md — All interface contracts
- architect/dependency-graph.md — Full dependency DAG
-->

<!-- END ARCHITECT CONTEXT -->

<!-- ARCHITECT GENERATED -->
<!-- Content below this marker is regenerated by /architect-decompose.
     Do not manually edit between ARCHITECT GENERATED and END ARCHITECT GENERATED. -->

<!-- END ARCHITECT GENERATED -->

<!-- USER ADDITIONS — preserved across regenerations -->
<!-- Add manual notes, clarifications, or overrides below this line.
     This section survives when inject_context.py regenerates the header. -->

<!-- END USER ADDITIONS -->
