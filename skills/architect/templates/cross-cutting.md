# Cross-Cutting Concerns

> This file is **append-only**. New versions are added below existing ones.
> Never modify a published version — add a new version section instead.
> Each version is tagged to the wave where it was introduced.

---

## v1 — Initial (Wave 1)

<!-- Generated by /architect-decompose from cross-cutting-catalog.md evaluation.
     Each subsection is a constraint that applies to tracks as noted.
     "Applies to: ALL" means every track. Scoped constraints note which tracks. -->

### {{CONCERN_1_NAME}}
{{CONCERN_1_DESCRIPTION}}
- Applies to: {{SCOPE}}
- Source: {{SOURCE}}

<!-- Example:

### Observability
- OpenTelemetry SDK for traces, metrics, logs
- structlog for Python services, pino for Node services
- Health checks: /healthz (liveness, no dependency checks), /readyz (readiness, includes deps)
- Applies to: ALL
- Source: Architecture research (always-recommend pattern)

### Error Handling
- RFC 7807 Problem Details format for all API error responses
- Errors logged with trace ID for correlation
- No stack traces in production responses
- Applies to: ALL services with HTTP endpoints
- Source: Cross-cutting catalog (always evaluate)

### Transactional Outbox
- All event publishing through outbox table
- Events and state changes in the same DB transaction
- Relay polls outbox table every 500ms
- Applies to: ALL services that publish domain events
- Source: Architecture research (accepted by developer)

### API Conventions
- RESTful endpoints, envelope responses: { "data": ..., "meta": ... }
- Cursor-based pagination for list endpoints
- Consistent naming: snake_case for JSON fields
- Applies to: ALL HTTP APIs
- Source: Architecture research

### Testing
- TDD approach: write tests before implementation
- 80% code coverage minimum
- Integration tests for API boundaries and event handlers
- Applies to: ALL
- Source: Cross-cutting catalog (always evaluate)

-->

---

<!-- NEW VERSIONS APPENDED BELOW
     Format for additions:

## v1.1 — Discovery (Wave {{N}}, Track {{TRACK_ID}})

### {{NEW_CONCERN_NAME}} (NEW)
{{DESCRIPTION}}
- Applies to: {{SCOPE}}
- Source: Discovery {{DISCOVERY_ID}} from Track {{TRACK_ID}}

### {{EXISTING_CONCERN_NAME}} (MODIFIED)
{{WHAT_CHANGED}}
- Applies to: {{SCOPE}}
- Source: Discovery {{DISCOVERY_ID}}

### Retroactive Compliance
| Track | State at time of change | Action |
|-------|-------------------------|--------|
| {{TRACK}} | completed | PATCH_REQUIRED — Phase {{P_ID}} added to plan.md |
| {{TRACK}} | in_progress | MID_TRACK_ADOPTION via constraint-update-check hook |
| {{TRACK}} | new | AUTO_INHERIT via context header regeneration |

-->
